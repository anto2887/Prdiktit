# railway.toml
[build]
builder = "dockerfile"
dockerfilePath = "backend/Dockerfile.prod"

[deploy]
startCommand = "gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000"

# frontend service
[[services]]
name = "frontend"
source = "frontend"

[services.build]
builder = "dockerfile"
dockerfilePath = "frontend/Dockerfile"

[services.deploy]
startCommand = "nginx -g 'daemon off;'"